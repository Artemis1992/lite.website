{% extends 'people/base.html' %}

{% block content %}
    <h1 class="center-title">{{ title }}</h1>

    <div class="form-container">
        <form method="post" autocomplete="off">
            {% csrf_token %}

            {% for f in form %}
                <div class="form-group">
                    <label class="form-label" for="{{ f.id_for_label }}">
                        {% if f.name == 'username' %}
                            Login:
                        {% elif f.name == 'password1' %}
                            Password:
                        {% elif f.name == 'password2' %}
                            Повторите пароль:
                        {% else %}
                            {{ f.label }}
                        {% endif %}
                    </label>

                    <div class="form-field password-container">
                        <input type="{% if f.name in 'password1 password2' %}password{% else %}text{% endif %}" 
                               name="{{ f.name }}" id="{{ f.id_for_label }}" class="form-field-input"
                               autocomplete="new-password"
                               placeholder="{% if f.name == 'username' %}Имя{% elif f.name == 'password1' %}Пароль{% elif f.name == 'password2' %}Повторите пароль{% else %}{{ f.label }}{% endif %}" />

                        {% if f.name in 'password1 password2' %}
                            <!-- Чекбокс для показа пароля -->
                            <div class="show-password-container">
                                <label class="clickable-label">
                                    <input type="checkbox" class="show-password" onclick="togglePassword(this)">
                                    Показать&#8203;пароль&#8203;
                                </label>
                            </div>
                        {% endif %}
                    </div>

                    {% if f.errors %}
                        <div class="form-error">
                            {% for error in f.errors %}
                                <p class="error-message">{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}

            <button type="submit" class="submit-btn">Регистрация</button>
        </form>
    </div>

    <script>
        function togglePassword(checkbox) {
            let input = checkbox.closest('.password-container').querySelector('.form-field-input');
            if (input) {
                input.type = (input.type === "password") ? "text" : "password";
            }
        }

        // Очистка полей при загрузке страницы
        window.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.form-field-input').forEach(input => {
                input.value = '';
            });
        });
    </script>

{% endblock %}

